---
---
Redovisning kmom04
=========================

Min kodtäckning denna vecka var inte så imponerande , då den är oförändrad från förra kursmomentet. Jag har smyg kikat på nästa veckas uppgift och den verkar innehålla “continuous integration” så det blir ett perfekt tillfälle att jobba mot 100% kodtäckning. Min applikation innehåller faktiskt klasser som jag inte längre använder så det är också läge att radera dom så att statistiken ser lite bättre ut. Att jobba med enhetstester denna vecka var faktiskt lite svårt tycker jag. Efter att jag funderat på olika sätt att hantera både min kod och den del av ramverket som är nödvändig för att testen faktiskt ska rulla, så är jag inte jättenöjd med lösningen. Eftersom min moduls kod lever i vendor-mappen så kommer den inte bli inkluderad i själva projektets källkod, och samtidigt så krävs delar av Anax för att den ska funka. En av mina idéer var att skriva ett bash-skript som kopierar koden temporärt från Anax till min modul, alternativt min modul till Anax, men det ser lite konstigt ut. Min lösning involverar att ta dom delar som behövs för att skapa vyer och hålla sessioner till min modul, men detta skapar tyvärr duplicerad kod vilket inte heller är bra. Nu är jag nyfiken på vad den riktiga lösningen är om ens egna paket faktiskt kräver ett stort ramverk så som Anax i det där fallet.  

Det är väldigt smart att göra en länk mellan en utvecklarmiljö och modulen som man programmerar. Som nämnt i artikeln så sparar man massvis med tid då man slipper att publicera varje förändring och kan istället bara ladda om som vanligt. Mot slutet av kursmomentet så kom jag på att jag borde gjort precis samma sak för vyerna då dom lever i en egen mapp precis som källkoden gör. Detta ska jag verkligen försöka komma ihåg till andra projekt. I mitt huvud så låter det som om det inte borde fungera då det skapas en typ av oändlig “loop” med directories men det fungerar smärtfritt ändå. Att sedan installera mitt egna paket i redovisningssidan gick väldigt bra. Gjorde liknande skript som Mikael hade i exempelkoden och alla filer fann sin rätta plats i projektet. Av någon anledning lyckades jag inte skapa nya namespaces att skapa ny kod i, trots att composer filen innehåller det nya namnet och jag ominstallerade projektet (gjorde iof inte composer update) så tog det inte effekt. Lyckligtvis var det bara att lägga min nya kod i det tidigare utrymmet men hade varit schysst att kunna gruppera koden på ett lite snyggare sätt.  

Laravel verkar använda mer eller mindre samma teknik för att installera och hantera paket som är utvecklade av programmerare utanför ramverket. Dom kallas “stand-alone” om det inte finns någon referens till Laravel inuti källkoden och därmed kan dom också användas i vilket PHP-projekt som helst. Lite så önskar jag att jobba om det sista kursmomentet kräver att man börjar om från början, och om det är absolut nödvändigt så utnyttjar man Anax till delar so kräver dess funktionalitet. Egentligen så vill jag bara skriva om allt till så små klasser som möjligt och helst ingen som beroende av Anax (eller vilket ramverk som helst) så att testning och implementering är enklare. Då skulle nästan alla returtyper vara JSON-format som sedan kan användas av vyer eller kontroller som vill komma åt informationen. Det fanns mycket att lära sig denna vecka. I framtiden vill jag även använda länkar mer ofta för att ta del av kod mellan projekt utan att kopiera hela tiden, så elegant lösning. Kanske lite konstigt att skriva om med tanke på att vi bokstavligt skapade länkar första veckan av utbildningen. Viktigt att tänka på är ju också att genvägar beter sig annorlunda på olika operativsystem så man ska inte helt förlita sig på dom. 