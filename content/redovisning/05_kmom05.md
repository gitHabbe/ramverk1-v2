---
---
Redovisning kmom05
=========================

Som nämnt tidigare vecka så lyckades jag bli av med en massa kod som blev övergiven halvvägs genom utveckling. Detta gav ju såklart bättre resultat för testerna eftersom jag slipper göra tester för oanvända klasser och projektets storlek minskades i sin helhet. Det finns fortfarande många funderingar kring vad som faktiskt är bra enhetstestning och vad som bara är ett onödigt test. Vem som helst kan nå stor kolteckning, men inte alla skriva bra och effektiva tester som verkligen ser till att en klass eller modul beter sig 99% korrekt. Jag ska försöka hitta någon bok eller artikel att läsa mig djupare in i detta så man inte slösar sin egen, ett företags eller kunders tid att skriva tester som knappt hjälper framtida utveckling av applikationen som man arbetar på. Det är extra svårt när man jobbar mot klasser som nyttjar vyer eller liknande verktyg. Ytligare en anledning att jobba med små filer som bara ska göra ett litet jobb och leverera enbart den datan. Självklart är det inte möjligt i detta fall eftersom vi faktiskt ska bygga vyerna och då kan man kanske tycka att ett funktionellt test hade varit mer effektivt i situationen. Det går dock inte att säga på rak arm eftersom Anax erbjuder en rad API-anrop som ger kontroll över hur en sida byggs och skickas till webbläsaren. Jag lyckades nå hög kodtäckning då jag var villig att vända på dom fula röda numren som tidigare hade skapats när jag gjorde uppgifterna. Eftersom både Travis och Circleci är stora inom programmering så implementerade jag båda till min modul, tillsammans med Scrutinizer som var ett krav. Det är fantastiska verktyg som både kan varna om en ny "gren” förstör applikationen, men också förslag på förbättringar som kan städa upp kodbasen också. Scrutinizer tipsade mig om att radera några debugg-anrop, men även några förändringar på Anax-filer som jag valde att ignorera för att undvika framtida problem. Mitt under testningen så hittade jag även misstag som jag tror hade börja äta på resurser av datorn, men valde såklart att skriva om delarna så att det inte händer. 

Om något så insåg jag stora problem i en av mina klasser som jag aldrig vill göra igen. Här ser man definitivt hur dependency injection är något man verkligen ska använda sig av i tillfällen där man kan. Inte nog med att min klass som tar hand om förfrågningar till API:er använder sig utav PHP’s curl-funktion, den är även beroende av en någon typ av källa för att validera resultatet som tas emot. Detta är svårt att “mocka” för mig för min gissning är att det inte går att skriva över curl funktionerna till egna metoder på grund av reserverade namn och i nuläget har jag inte en lösning för att skriva över privata properties med egna värden. Klassen blev även för stor och har egenskaper som faktiskt inte behövs för att utföra det jobb som den tar hand om. Detta i sin tur gör att man måste skriva några onödiga tester för att se till att metoder som jag inte behöver fungerar som förväntat, slöseri. Detta är något jag förmodligen kommer titta tillbaka på under hela min karriär som utvecklare som en stor röd flagga och förhoppningsvis aldrig göra igen. Det är helt klart en erfarenhet som får mig att växa som problemlösare och kommer för alltid vara ett lärorikt minne. Smygkikade lite på nästa kursmoment och det verkar som vi återkommer till någon typ av SQL vilket är roligt. Om vi använder oss av någon typ av PDO igen så ska jag vara noggrann med att ta den som en parameter till konstruktören för enklare och bättre tester. 
